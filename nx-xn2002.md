---
timezone: UTC+8
---

> 请在上边的 timezone 添加你的当地时区(UTC)，这会有助于你的打卡状态的自动化更新，如果没有添加，默认为北京时间 UTC+8 时区


# 倪响

1. 自我介绍 北京邮电大学大四学生，在 24 年接触并了解到 Web3，对 Web3 技术和理念很感兴趣，希望能够进一步学习 Web3 知识并在未来能够参与到 Web3 生态的建设当中
2. 你认为你会完成本次残酷学习吗？ 会
3. 你的联系方式(推荐 Telegram) @nx_xn2002   1870230468@qq.com

## Notes

<!-- Content_START -->

### 2025.05.14

今天是共学的第一天，我打算先通过粗读 EIP-7702 提案原文，对涉及到的相关概念有一个初步的了解。

首先，在 Abstract 摘要中我了解到，该提案新增了一种交易类型，允许 EOA 在**一笔交易**中通过签名授权某些合约来代理其行为，换句话说，就是使得 EOA 在该交易中**临时拥有执行合约代码的能力**。

在此前的学习中，我了解到以太坊中有两类账户类型：EOA（**Externally Owned Account**，外部拥有账户）和智能合约账户（**Contract Account**）。像我们常用的 MetaMask 等钱包创建的地址，几乎都是 EOA。EOA 具有以下几个特点：

1. 账户中没有可执行的合约代码，不能响应调用，只能主动发起交易
2. 可以向其他账户发送 ETH 或调用合约方法
3. 由用户持有私钥控制，只有持有私钥的人才能发起交易
4. 每次交易需要自行支付 gas 费用

按我的理解，EIP-7702 是因为原本的 EOA 仅能用于签名和发起交易，功能非常有限，而此次提案尝试通过一种类似“代理模式”的方法，让 EOA 在单次交易中“**临时委托**”某个合约地址的代码来代理其执行逻辑，重点在于这种代理仅在该笔交易的生命周期内有效。

因此我总结为一句话：
 **EIP-7702 是一种以“一次交易”为生命周期的、临时性合约代理机制，使 EOA 能在该交易中由指定合约代码代理其行为。**

今天时间有限，我还阅读了 Motivation 动机部分。大致了解到，该提案的动因主要是因为当前 EOA 的设计限制了许多提升用户体验的应用场景。EIP-7702 的设计重点围绕以下三个功能展开：

- 批处理
- 赞助（gas fee abstraction）
- 权限降级（delegated control）

明天我将从这几个功能出发，深入理解其实现方式与潜在应用。

> 保留疑问：我是从后端初入 web3 领域的，据我了解代理模式是扩展现有系统功能的一种常见方法，但为什么以太坊发展至今才尝试引入类似机制对 EOA 进行扩展（或者之前已有类似机制？）是否是由于最初的设计约束，还是出于安全性方面的考虑？希望在后续学习中能逐步找到答案。

### 2025.05.15

今天继续阅读 EIP-7702 提案原文。

延续昨天的内容，我今天进入了 Specification（规范）部分的阅读。提案定义了一种全新的交易类型，称为 **set code transaction**，是基于 EIP-2718（统一交易类型架构）之上的扩展。该交易类型允许 EOA 在发起交易时，携带一个“委托指示器”（delegation indicator），即一段特定格式的合约代码（如 `0xef0100 || address`），用于指定一个代理执行的合约地址。

这一机制的核心变化之一，是修改了 **EIP-3607** 的限制。查阅后发现 EIP-3607 的原意是防止含有代码的账户发起交易，以提升网络安全性。而 EIP-7702 放宽了这一限制，允许具有特定格式（即代理指示器）的代码账户作为合法的交易发送者。虽然这样提升了 EOA 的扩展能力，但也确实引入了更多攻击面，属于在安全性与功能性之间的一种权衡

在 **General design philosophy（设计理念）** 部分，提案作者讨论了代码委托（Code Delegation）的持久性问题。最初的设想是采用临时授权机制：在一笔交易中暂时写入合约代码，执行完毕后立即清除。这种方式相对安全，避免了永久性修改账户状态。但实践中发现，这种设计容易被用户当作脚本引擎使用，而非作为智能钱包的正式升级路径，导致用户体验发展方向割裂：一边是轻量脚本化 EOA，一边是全功能合约钱包。

为统一发展路径，提案后来倾向于采用 **持久化委托** 机制。这样一来，部署成本与复杂度变高，能有效降低滥用的概率，也促使开发者将其视为一种正式的钱包扩展手段，而非临时性的 hack。这种“制造一定摩擦”的策略，是为了防止生态在“智能钱包 vs EOA 脚本”之间产生分裂。

我认为这个权衡很有意思：技术上，临时委托可以更灵活、快速地落地，但长期来看会让系统形态更发散、不统一；而持久化委托虽然牺牲了一定便捷性，却可能促进生态统一走向可维护、安全性更高的方向。

阅读至此，我有一个更明确的感受：**EIP-7702 并不仅仅是为了解决某一个用户操作上的不便，而是在构建一种面向未来的钱包账户形态，在 EOA 与智能合约钱包之间建立“可过渡的中间形态”**，以引导用户逐步迈向合约钱包世界。

明天我准备从提案所提到的实际应用出发，比如批处理、Gas 抽象和权限管理等方面，寻找一些现有代码或 Demo 项目，看看能不能加深理解和思考

> 疑问延续：EIP-7702 的出现是否代表 EOA 的生命周期正在逐渐结束，未来是否所有钱包都将演进为某种形式的智能合约账户？

### 2025.05.17

今天看到群里有朋友讨论 EIP-7702 的一个潜在应用场景：**Social Recovery（社交恢复）**。这是当前智能钱包中常见的一种功能，用于帮助用户在私钥丢失或无法访问账户的情况下，**恢复对账户的控制权**。值得注意的是，这里强调的是“恢复控制权”而非“找回原始私钥”，因为从安全角度出发，私钥应始终保持不可泄露。

结合前几天对 EIP-7702 的学习，我突然意识到：**这项提案本质上为 EOA 引入了“可被代码代理控制”的能力，等于是为传统不可扩展的 EOA 打开了权限恢复的可能性**。原本，一旦用户丢失私钥，EOA 便无法再被控制；但在 7702 中，用户可以预先通过一笔 `set code` 交易，为自己的 EOA 设置一段可代理执行的合约逻辑，从而在合约层面实现权限校验与恢复策略。

以 EIP-7702: A Deep Dive into Smart EOAs with Implementation Examples 中所举的例子为例，常见的恢复机制包括：

- **M-of-N 签名机制**：如 2-of-3 guardian 模式，用户可指定多个可信账户（朋友、设备、服务）共同协助恢复权限
- **ZK-email 验证**：通过 zk 证明用户控制某个邮箱，实现无需暴露隐私信息的权限确认
- **社交图授权**：利用链上社交图谱确定可信关系网络，实现去中心化的恢复流程

这些机制本来只能在智能合约钱包中实现，而 EIP-7702 的出现，使得它们首次成为 EOA 用户的可能选项。

从我的角度来看，EIP-7702 很像一种“分层管理员”的权限架构：

- **EOA 本身类似于超级管理员（root）**，拥有最初的签名权限，可以任意指定或撤销代理合约
- **代理合约则扮演系统管理员（admin）** 的角色，执行日常操作，并内嵌各种权限控制逻辑
- 这样即使用户暂时无法访问超级管理员权限（丢失私钥），只要代理逻辑设置得当，仍有可能通过其他机制恢复访问权

这其实是传统 Web 安全设计中的常见做法，只不过在链上执行，需要在不牺牲去中心化与安全性的前提下完成

当然，**EIP-7702 的开放性也意味着潜在的安全挑战**。一旦用户误授权了一个恶意合约为代理，便可能彻底失去账户控制权。因此我认为：

- 对 `set code` 交易的内容审计至关重要
- 钱包和浏览器层应该在授权代理逻辑时提供更透明的 UI 和合约行为分析
- 用户教育也应同步跟上，避免因轻信而转交控制权

<!-- Content_END -->
